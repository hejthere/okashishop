(this.webpackJsonpokashishop=this.webpackJsonpokashishop||[]).push([[0],{120:function(e,t,n){},125:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},137:function(e,t,n){},236:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(33),i=n.n(r),s=(n(120),n(89),n(10)),o=n(108),u=n(242),l=n(241),d=n(2);function j(e){return Object(d.jsxs)(u.a,{fixed:"top",collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:[Object(d.jsx)(u.a.Brand,{href:"/",children:"Okashii"}),Object(d.jsx)(u.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(d.jsx)(u.a.Collapse,{id:"responsive-navbar-nav",children:Object(d.jsxs)(l.a,{className:"mr-auto",children:[Object(d.jsx)(l.a.Link,{eventKey:2,onClick:e.cartButton,children:"Cart"}),Object(d.jsx)(l.a.Link,{onClick:e.logOutHandler,children:e.logOutText})]})})]})}var b=n(109),h=(n(125),function(e){return Object(d.jsxs)(o.a,{className:"banner-container",fluid:"true",children:[Object(d.jsx)("div",{className:"banner-text",children:" \u3088\u3046\u3053\u305d"}),Object(d.jsx)(b.a,{src:e.backgrounds,className:"banner-image",alt:"background",fluid:"true"})]})}),p=n.p+"static/media/macha.171402b6.jpg",O=n(23),f=n(42),x=n(15),m=n.n(x),v=n(29),g=n(110),y=n(238),k=(n(90),n(84));function N(e){return Object(d.jsxs)("div",{className:"product-container p-1",children:[Object(d.jsx)(b.a,{className:"product-image m-auto",src:e.picture}),Object(d.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(d.jsx)("h4",{children:e.name}),Object(d.jsxs)("h4",{className:"product-price",children:["HK$",e.price]})]}),Object(d.jsx)(k.a,{variant:"info",id:e.id,onClick:e.addToCartHandler,children:"Add to Cart"})]})}var w=Object(c.createContext)(),C=function(e){var t=e.children,n=JSON.parse(localStorage.getItem("cartItem"))||[],a=Object(c.useState)(n),r=Object(s.a)(a,2),i=r[0],o=r[1];return Object(d.jsx)(w.Provider,{value:[i,o],children:t})},H=n(88);function S(e){return Object(d.jsx)("div",{className:"products-search-container",children:Object(d.jsxs)(y.a,{children:[Object(d.jsx)(g.a,{children:Object(d.jsx)("input",{type:"text",ref:e.forwardedRef,className:"products-search"})}),Object(d.jsx)(k.a,{variant:"outline-info",className:"mx-1",onClick:e.searchHandler,children:"Search"}),Object(d.jsx)(k.a,{variant:"outline-info",className:"mx-1",onClick:e.resetHandler,children:"Reset"}),Object(d.jsx)(H.a,{children:Object(d.jsx)(g.a,{children:Object(d.jsxs)(H.a.Control,{className:"mx-1",as:"select",value:e.value,custom:!0,onChange:e.sortHandler,children:[Object(d.jsx)("option",{defaultValue:!0,disabled:!0,value:"",children:"Sort by Price"}),Object(d.jsx)("option",{value:"fromHightToLow",children:"From High to Low"}),Object(d.jsx)("option",{value:"fromLowToHigh",children:"From Low to High"})]})})})]})})}function I(){var e=Object(c.useContext)(w),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useRef)(),i=Object(c.useState)(""),u=Object(s.a)(i,2),l=u[0],j=u[1],b=Object(c.useState)([]),h=Object(s.a)(b,2),p=h[0],x=h[1],k=Object(c.useState)([]),C=Object(s.a)(k,2),H=C[0],I=C[1],q=Object(c.useCallback)(Object(v.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://my-json-server.typicode.com/hejthere/picture/db");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,x(n.arrayOfProducts||[]);case 7:case"end":return e.stop()}}),e)}))),[]);Object(c.useEffect)((function(){q()}),[q]),Object(c.useEffect)((function(){I(p)}),[p]);var P=function(e){var t=p.find((function(t){return t.id===e.target.id}));if(n.find((function(e){return e.id===t.id}))){var c=n.indexOf(t),r=Object(f.a)(n);r[c]=Object(O.a)(Object(O.a)({},t),{},{quantity:t.quantity+1}),a(r)}else a([].concat(Object(f.a)(n),[t]));alert("Added to Cart")},L=H.map((function(e){return Object(d.jsx)(g.a,{className:"py-3 px-0",children:Object(d.jsx)(N,{id:e.id,picture:e.imgUrl,name:e.name,price:e.price,addToCartHandler:P})},e.id)})),T=function(e){j(e.target.value);var t=Object(f.a)(p);"fromHightToLow"===l?t.sort((function(e,t){return e.price>t.price?1:-1})):t.sort((function(e,t){return e.price>t.price?-1:1})),I(t)};return Object(d.jsxs)(o.a,{fluid:"true",className:"overflow-hidden",children:[Object(d.jsxs)(y.a,{xs:1,sm:1,md:!0,lg:!0,xl:2,children:[Object(d.jsx)(g.a,{children:Object(d.jsx)("h2",{className:"pt-3",children:" Feature Items: "})}),Object(d.jsx)(g.a,{children:Object(d.jsx)(S,{forwardedRef:r,searchHandler:function(){var e=r.current.value;if(""!==e.trim()|0!==e.length){var t=p.filter((function(t){return t.name.toUpperCase().includes(e.toUpperCase())}));I(t)}else I(p);r.current.value=""},resetHandler:function(){I(p),r.current.value=""},sortHandlerHigh:function(){return T(!0)},sortHandlerLow:function(){return T(!1)},sortHandler:T,value:l})})]}),Object(d.jsxs)(y.a,{className:"m-0 px-1",xs:!0,sm:2,md:!0,lg:!0,xl:4,children:[0===H.length&&Object(d.jsx)("h5",{className:"my-3",children:"No result is found !"}),L]})]})}var q=n.p+"static/media/ocha.dd694839.jpg",P=n.p+"static/media/osara.d2d3cf21.jpg";n(127);function L(){var e=[{picture:q,description:"Looking for tea leaf?",hiddenText:"Order with us!"},{picture:P,description:"Join our event!",hiddenText:"Coming soon!"}].map((function(e){return Object(d.jsxs)(g.a,{className:"p-0 section-container",children:[Object(d.jsx)("div",{className:"section-hidden-text-container",children:Object(d.jsx)("div",{className:"section-hidden-text",children:e.hiddenText})}),Object(d.jsx)(b.a,{className:"section-picture",src:e.picture,fluid:"true"}),Object(d.jsx)("div",{className:"section-text-container",children:Object(d.jsx)("div",{className:"section-text",children:e.description})})]},e.description)}));return Object(d.jsx)(o.a,{fluid:"true",children:Object(d.jsx)(y.a,{xs:1,md:2,lg:2,className:"m-0",children:e})})}var T=n(240);n(128);function U(e){return Object(d.jsxs)(y.a,{children:[Object(d.jsxs)(g.a,{children:[Object(d.jsx)(b.a,{src:e.image,className:"cartItem-image"}),Object(d.jsx)("div",{children:e.name}),Object(d.jsxs)("div",{children:["HK$",e.price]})]}),Object(d.jsxs)(g.a,{children:[Object(d.jsxs)("div",{children:["Quantity: ",e.quantity]}),Object(d.jsx)(k.a,{variant:"outline-info",id:e.id,onClick:e.addOne,className:e.buttonClassName,children:" + "}),Object(d.jsx)(k.a,{variant:"outline-info",id:e.id,onClick:e.minusOne,className:e.buttonClassName,children:" - "})]}),Object(d.jsx)(g.a,{children:Object(d.jsxs)("div",{children:["Total Price: HK$",e.totalPrice]})})]})}function A(e){var t=Object(c.useContext)(w),n=Object(s.a)(t,2),a=n[0],r=n[1];Object(c.useEffect)((function(){localStorage.setItem("cartItem",JSON.stringify(a))}),[a]);var i=function(e,t){var n=a.find((function(t){return t.id===e.target.id})),c=a.indexOf(n),i=Object(f.a)(a);t||1!==n.quantity?i[c]=Object(O.a)(Object(O.a)({},n),{},{quantity:t?n.quantity+1:n.quantity-1}):i.splice(c,1),r(i)},o=a.map((function(e){return Object(d.jsx)(U,{buttonClassName:"m-1 visible",id:e.id,image:e.imgUrl,name:e.name,price:e.price,quantity:e.quantity,addOne:function(e){return i(e,!0)},minusOne:function(e){return i(e,!1)},totalPrice:e.quantity*e.price},e.id)}));return Object(d.jsxs)(T.a,{animation:!1,size:"lg",show:e.show,onHide:e.onHide,dialogClassName:"shopping-cart-box","aria-labelledby":"shopping-cart",children:[Object(d.jsx)(T.a.Header,{closeButton:!0,children:Object(d.jsx)(T.a.Title,{id:"shopping-cart-title",children:"Shopping Cart"})}),Object(d.jsxs)(T.a.Body,{children:[0===a.length&&Object(d.jsx)("div",{children:"Oops! Nothing is in the cart. "}),o,Object(d.jsx)("div",{className:"w-100 d-flex justify-content-end",children:a.length>0&&Object(d.jsx)(k.a,{onClick:e.checkOutHandler,variant:"info",children:"Check Out"})})]})]})}var E=n(51),B=(n(129),n(131),E.a.initializeApp({apiKey:"AIzaSyAmLNW3z9Y7u4vv-3UPlw1ZGIYm6qNSESk",authDomain:"okashi-database.firebaseapp.com",databaseURL:"https://okashi-database-default-rtdb.firebaseio.com",projectId:"okashi-database",storageBucket:"okashi-database.appspot.com",messagingSenderId:"94642731681",appId:"1:94642731681:web:3e6e07c07f3155f5724ee0"})),R=B.auth(),D=E.a.database(),F=a.a.createContext();function K(){return Object(c.useContext)(F)}function J(e){var t=e.children,n=Object(c.useState)(),a=Object(s.a)(n,2),r=a[0],i=a[1],o=Object(c.useState)(!0),u=Object(s.a)(o,2),l=u[0],j=u[1];function b(){return(b=Object(v.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.setPersistence(E.a.auth.Auth.Persistence.LOCAL);case 3:return e.next=5,R.createUserWithEmailAndPassword(t,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function h(){return(h=Object(v.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.signInWithEmailAndPassword(t,n);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),alert(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function p(){return(p=Object(v.a)(m.a.mark((function e(t,n,c){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=D.ref("user/"+t+"/".concat(Date.now())),e.next=4,a.set({name:n.name,address:n.address,cartItem:n.cartItem,date:c});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}Object(c.useEffect)((function(){return R.onAuthStateChanged((function(e){i(e),j(!1)}))}),[]);var O={currentUser:r,setCurrentUser:i,signUp:function(e,t){return b.apply(this,arguments)},login:function(e,t){return h.apply(this,arguments)},signOut:function(){return R.signOut()},updateCartHistory:function(e,t,n){return p.apply(this,arguments)}};return Object(d.jsx)(F.Provider,{value:O,children:!l&&t})}var $=n(12);function z(){var e=K(),t=e.currentUser,n=e.signOut,a=Object($.g)(),r=Object(c.useState)(!1),i=Object(s.a)(r,2),u=i[0],l=i[1];return Object(d.jsxs)(o.a,{fluid:"true",children:[Object(d.jsx)(j,{logOutHandler:function(){if(!t)return a.push("/login");n(),alert("You are logged out.")},logOutText:t?"Log Out":"Log In",cartButton:function(){return l(!0)}}),Object(d.jsx)(h,{backgrounds:p}),Object(d.jsx)(L,{}),Object(d.jsx)(I,{}),Object(d.jsx)(A,{checkOutHandler:function(){if(!t)return a.push("/login");a.push("/checkout")},show:u,onHide:function(){return l(!1)}})]})}n(136);var W=n(27),Y=n(243),G=n(239);n(137);function M(){var e,t=Object($.h)(),n=Object(c.useRef)(),a=Object(c.useRef)(),r=Object(c.useRef)(),i=Object($.g)(),u=K(),l=u.signUp,j=u.login,b=Object(c.useState)(),h=Object(s.a)(b,2),p=h[0],O=h[1],f=Object(c.useState)(!0),x=Object(s.a)(f,2),N=x[0],w=x[1],C=[{id:"email",label:"Email",type:"email",ref:n,placeholder:"Enter email"},{id:"password",label:"Password",type:"password",ref:a,placeholder:"Enter password"},{id:"confirmPassword",label:"Confirm Password",type:"password",ref:r,placeholder:"Re-enter password"}],S=C.filter((function(e){return"confirmPassword"!==e.id}));e=(N?S:C).map((function(e){return Object(d.jsxs)(H.a.Group,{children:[Object(d.jsx)(H.a.Label,{children:e.label}),Object(d.jsx)(H.a.Control,{required:!0,type:e.type,ref:e.ref,placeholder:e.placeholder})]},e.id)})),Object(c.useEffect)((function(){"/signup"===t.pathname&&w(!1)}),[t]);function I(){return(I=Object(v.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,j(n.current.value,a.current.value);case 4:i.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),O("Fail to log in");case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function q(){return(q=Object(v.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.current.value===r.current.value){e.next=3;break}return e.abrupt("return",O("Password does not match!"));case 3:return e.prev=3,O(""),e.next=7,l(n.current.value,a.current.value);case 7:i.push("/home"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),O("Failed to create account!");case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}return Object(d.jsx)(o.a,{className:"login-container",children:Object(d.jsx)(y.a,{fluid:"true",children:Object(d.jsx)(g.a,{children:Object(d.jsxs)("div",{className:"w-100",style:{maxWidth:"700px"},children:[Object(d.jsx)("h1",{children:N?"Log In":"Sign In"}),Object(d.jsx)(Y.a,{children:Object(d.jsx)(Y.a.Body,{children:Object(d.jsxs)(H.a,{onSubmit:N?function(e){return I.apply(this,arguments)}:function(e){return q.apply(this,arguments)},children:[p&&Object(d.jsx)(G.a,{variant:"danger",children:p}),e,Object(d.jsx)(k.a,{type:"submit",children:N?"Log In":"Sign In"}),Object(d.jsx)(k.a,{className:"mx-3",href:"/",children:"Back"}),Object(d.jsxs)("div",{className:"my-3",children:[N?"Haven't sign up yet ? ":"Already have an account ? ",Object(d.jsx)(W.b,{onClick:function(){w(!N),O()},to:N?"/signup":"/login",children:N?"Sign up here":"Log in here"})]})]})})})]})})})})}function Q(){var e=Object(c.useContext)(w),t=Object(s.a)(e,1)[0],n=K(),a=n.updateCartHistory,r=n.currentUser,i=Object(c.useRef)(),u=Object(c.useRef)(),l=Object($.g)();var j=[{id:"name",label:"Name",type:"input",ref:i,placeholder:"Enter Name"},{id:"deliveryAddress",label:"Delivery Address",type:"input",ref:u,placeholder:"Enter Address"}].map((function(e){return Object(d.jsxs)(H.a.Group,{children:[Object(d.jsx)(H.a.Label,{children:e.label}),Object(d.jsx)(H.a.Control,{required:!0,type:e.type,ref:e.ref,placeholder:e.placeholder})]},e.id)})),b=t.map((function(e){return Object(d.jsx)(U,{buttonClassName:"m-1 invisible",id:e.id,image:e.imgUrl,name:e.name,price:e.price,quantity:e.quantity,totalPrice:e.quantity*e.price},e.id)}));return Object(d.jsxs)(o.a,{children:[Object(d.jsx)("h2",{children:"Order Detail"}),j,Object(d.jsx)("hr",{}),b,Object(d.jsx)("hr",{}),Object(d.jsxs)("h4",{className:"w-100 d-flex justify-content-end",children:["Total Price: HK$",t.length<2?t[0].price:t.reduce((function(e,t){return e.quantity*e.price+t.quantity*t.price}))]}),Object(d.jsxs)("div",{className:"w-100 d-flex justify-content-end my-3",children:[Object(d.jsx)(k.a,{variant:"info",className:"mx-1",onClick:function(){a(r.uid,{name:i.current.value,address:u.current.value,cartItem:t},Date.now()).then(alert("Your order has been received!"),l.push("/history")).catch((function(e){return alert(e)}))},children:"Confirm"}),Object(d.jsx)(k.a,{variant:"danger",className:"mx-1",onClick:function(){return l.goBack()},children:"Back"})]})]})}function V(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!0),i=Object(s.a)(r,2),u=i[0],l=i[1],j=K().currentUser,b=Object($.g)();Object(c.useEffect)((function(){D.ref("user/"+j.uid).on("value",(function(e){var t=e.val();a(t),l(!1)}))}),[j]);var h=Object.keys(n||{}).map((function(e){return n[e]})).map((function(e){return Object(d.jsxs)(o.a,{className:"m-5",children:[Object(d.jsx)("div",{children:new Date(e.date).toUTCString()}),e.cartItem.map((function(e){return Object(d.jsx)(U,{buttonClassName:"m-1 invisible",id:e.id,image:e.imgUrl,name:e.name,price:e.price,quantity:e.quantity,totalPrice:e.quantity*e.price},e.id)})),Object(d.jsxs)("h4",{className:"w-100 d-flex justify-content-end",children:["Total Price: HK$",e.cartItem.length<2?e.cartItem[0].price:e.cartItem.reduce((function(e,t){return e.quantity*e.price+t.quantity*t.price}))]}),Object(d.jsx)("hr",{})]},e.date)}));return Object(d.jsxs)(o.a,{children:[Object(d.jsx)("h1",{children:"Order History"}),!u&&h,Object(d.jsx)("div",{className:"w-100 mb-3 d-flex justify-content-end",children:Object(d.jsx)(k.a,{variant:"info",onClick:function(){return b.push("/")},children:"Back"})})]})}var Z=n(115);function X(e){var t=e.component,n=Object(Z.a)(e,["component"]),c=K().currentUser;return Object(d.jsx)($.b,Object(O.a)(Object(O.a)({},n),{},{render:function(e){return c?Object(d.jsx)(t,Object(O.a)({},e)):Object(d.jsx)($.a,{to:"/"})}}))}var _=n(114);var ee=function(){return Object(d.jsx)(J,{children:Object(d.jsx)(C,{children:Object(d.jsx)(_.a,{children:Object(d.jsx)(o.a,{className:"App",fluid:"true",children:Object(d.jsxs)($.d,{children:[Object(d.jsx)($.b,{exact:!0,path:"/",component:z}),Object(d.jsx)($.b,{exact:!0,path:"/login",component:M}),Object(d.jsx)($.b,{exact:!0,path:"/signup",component:M}),Object(d.jsx)(X,{exact:!0,path:"/checkout",component:Q}),Object(d.jsx)(X,{exact:!0,path:"/history",component:V})]})})})})})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,244)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(W.a,{basename:"/okashishop",children:Object(d.jsx)(ee,{})})}),document.getElementById("root")),te()},89:function(e,t,n){},90:function(e,t,n){}},[[236,1,2]]]);
//# sourceMappingURL=main.1e747f03.chunk.js.map